services:
  - type: web
    name: luckydraw-backend
    env: go
    plan: free
    region: singapore
    branch: main

    # สร้าง binary ชื่อ main
    buildCommand: go build -o main .

    # รันคำสั่ง http (cobra command: go run . http)
    startCommand: ./main http

    envVars:
      # --- DB (Supabase) ---
      # ใส่ค่าตาม DB_DSN ใน .env ของคุณ แต่ไปตั้งในหน้า Dashboard จะปลอดภัยกว่า
      - key: DB_DSN
        sync: false   # ไปกรอกค่าใน Render Dashboard เอง

      # ถ้าจะใช้ sslmode ในโค้ดเก่าด้วยก็เซ็ตเพิ่มได้
      - key: DB_SSLMODE
        value: require

      # --- Timezone / Debug ---
      - key: TZ
        value: Asia/Bangkok
      - key: DEBUG
        value: "true"

      # --- Cloudinary (ตั้งผ่าน Dashboard ด้วยก็ได้) ---
      - key: CLOUDINARY_CLOUD_NAME
        sync: false
      - key: CLOUDINARY_API_KEY
        sync: false
      - key: CLOUDINARY_API_SECRET
        sync: false
